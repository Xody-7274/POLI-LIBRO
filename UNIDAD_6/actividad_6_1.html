<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividad 6.1: Fortaleza de la Seguridad</title>
    <link rel="icon" type="image/png" href="logoescom.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --accent: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #1a2a3a;
            --gray: #95a5a6;
            --monster-color: #9b59b6; /* Color tem√°tico para el virus (p√∫rpura) */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0f3d, #1a2a3a, #2c3e50);
            color: var(--light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(155, 89, 182, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(52, 152, 219, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(231, 76, 60, 0.05) 0%, transparent 50%);
            z-index: -1;
            animation: backgroundShift 12s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        @keyframes victoryGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.05) hue-rotate(8deg); }
        }

        @keyframes defeatPulse {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(0.95) contrast(1.05); }
        }

        .floating-home-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--secondary);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 4px 20px rgba(52, 152, 219, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            font-size: 1.5rem;
            opacity: 1;
            visibility: visible;
        }

        .floating-home-btn:hover {
            background: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(52, 152, 219, 0.4);
        }
        
        .floating-home-btn.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .sidebar-nav {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 999;
            transition: transform 0.3s ease;
            transform: translateX(-100%);
            overflow-y: auto;
        }

        .sidebar-nav.active {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 20px;
            background: rgba(155, 89, 182, 0.1);
            border-bottom: 1px solid rgba(155, 89, 182, 0.3);
        }

        .sidebar-title {
            font-size: 1.2rem;
            color: var(--monster-color);
            font-weight: 600;
            margin-bottom: 5px;
        }

        .sidebar-subtitle {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .nav-sections {
            padding: 20px 0;
        }

        .nav-section {
            margin-bottom: 15px;
        }

        .nav-section-title {
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--secondary);
            border-bottom: 1px solid rgba(52, 152, 219, 0.2);
            margin-bottom: 10px;
        }

        .nav-item {
            display: block;
            padding: 12px 20px;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: rgba(52, 152, 219, 0.1);
            border-left-color: var(--secondary);
            padding-left: 25px;
        }

        .nav-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            z-index: 1001;
            font-size: 1.2rem;
        }

        .menu-toggle:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .menu-toggle.active {
            background: var(--accent);
        }

        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 998;
        }

        .reading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            width: 0%;
            transition: width 0.1s ease;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            transition: margin-left 0.3s ease, margin-right 0.3s ease;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .breadcrumb {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            color: var(--gray);
            font-size: 1rem;
        }

        .breadcrumb a {
            color: var(--secondary);
            text-decoration: none;
            transition: color 0.3s;
        }

        .breadcrumb a:hover {
            color: white;
            text-decoration: underline;
        }

        .breadcrumb span {
            margin: 0 10px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: white;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .instructions {
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid rgba(52, 152, 219, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid var(--secondary);
        }

        .instructions h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .instructions ul {
            padding-left: 25px;
            color: var(--light);
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .battle-arena {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(155, 89, 182, 0.2);
            position: relative;
            overflow: hidden;
        }

        .battle-arena::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 50% 50%, rgba(155, 89, 182, 0.05) 0%, transparent 70%);
            z-index: -1;
            animation: arenaGlow 4s ease-in-out infinite;
        }

        @keyframes arenaGlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .monster-section {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(155, 89, 182, 0.15);
            border-radius: 15px;
            border: 2px solid rgba(155, 89, 182, 0.4);
            position: relative;
            overflow: hidden;
        }

        .monster-section::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(155, 89, 182, 0.1) 0%, transparent 70%);
            animation: monsterAura 3s linear infinite;
            z-index: -1;
        }

        @keyframes monsterAura {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .monster-avatar {
            font-size: 5rem;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .monster-name {
            font-size: 1.8rem;
            color: var(--monster-color);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .health-bar-container {
            width: 300px;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin: 0 auto 15px;
            overflow: hidden;
            border: 2px solid rgba(155, 89, 182, 0.5);
        }

        .health-bar {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, var(--monster-color));
            transition: width 0.5s ease;
            border-radius: 8px;
        }

        .health-text {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--light);
        }

        .player-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--secondary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .error-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .error-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .error-dot.filled {
            background: var(--accent);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        .questions-section {
            margin-top: 30px;
        }

        .questions-section h3 {
            color: var(--warning);
            margin-bottom: 20px;
            font-size: 1.3rem;
            text-align: center;
            border-bottom: 2px solid var(--warning);
            padding-bottom: 10px;
        }

        .question {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid var(--warning);
            transition: all 0.3s ease;
        }

        .question:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(5px);
        }

        .question-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--warning);
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .options {
            display: grid;
            gap: 12px;
        }

        .option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--secondary);
            transform: translateX(3px);
        }

        .option.selected {
            background: rgba(52, 152, 219, 0.2);
            border-color: var(--secondary);
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.3);
        }

        .option.correct {
            background: rgba(46, 204, 113, 0.2);
            border-color: var(--success);
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
            animation: correctPulse 0.6s ease;
        }

        .option.incorrect {
            background: rgba(231, 76, 60, 0.2);
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.4);
            animation: incorrectShake 0.6s ease;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }

        .option-letter {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--secondary);
            min-width: 25px;
        }

        .option.correct .option-letter {
            color: var(--success);
        }

        .option.incorrect .option-letter {
            color: var(--accent);
        }

        .option-text {
            flex: 1;
            font-size: 1rem;
        }

        .battle-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin: 30px 0;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }

        .btn-attack {
            background: var(--monster-color);
            color: white;
            box-shadow: 0 4px 15px rgba(155, 89, 182, 0.3);
            font-size: 1.2rem;
            padding: 18px 35px;
        }

        .btn-attack:hover {
            background: #8e44ad;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.4);
        }

        .btn-attack:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
            box-shadow: 0 4px 15px rgba(149, 165, 166, 0.3);
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-3px);
        }

        .btn-success {
            background: var(--success);
            color: white;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
        }

        .btn-success:hover {
            background: #27ae60;
            transform: translateY(-3px);
        }

        .game-status {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
            display: none;
        }

        .game-status.victory {
            background: rgba(46, 204, 113, 0.2);
            border: 2px solid var(--success);
            color: var(--success);
        }

        .game-status.defeat {
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid var(--accent);
            color: var(--accent);
        }

        .game-status.continue {
            background: rgba(243, 156, 18, 0.2);
            border: 2px solid var(--warning);
            color: var(--warning);
        }

        /* Nueva secci√≥n de soluciones desplegable */
        .solutions-section {
            background: rgba(46, 204, 113, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--success);
            display: none; /* Oculta por defecto */
        }

        .solutions-section h4 {
            color: var(--success);
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2rem;
        }

        .solution-item {
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            gap: 15px;
        }

        .nav-center {
            display: flex;
            justify-content: center;
            flex: 1;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            transition: width 0.3s ease;
            width: 0%;
        }

        .scroll-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            z-index: 999;
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-to-top:hover {
            background: #c0392b;
            transform: translateY(-3px);
        }

        @media (max-width: 768px) {
            .sidebar-nav {
                width: 100%;
            }

            h1 {
                font-size: 2rem;
            }

            .battle-controls {
                flex-direction: column;
                gap: 15px;
            }

            .player-stats {
                flex-direction: column;
                gap: 15px;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
            }

            .nav-center {
                order: 2;
            }

            .navigation .btn {
                width: 100%;
                text-align: center;
                justify-content: center;
            }

            .question {
                padding: 20px;
            }

            .floating-home-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .container {
                margin-left: 20px;
                margin-right: 20px;
                padding: 10px;
            }

            .health-bar-container {
                width: 250px;
            }

            .monster-avatar {
                font-size: 4rem;
            }
        }
    </style>
</head>
<body>
    <div class="reading-progress">
        <div class="reading-progress-bar" id="readingProgressBar"></div>
    </div>

    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <a href="index.html" class="floating-home-btn" title="Ir al inicio">
        <i class="fas fa-home"></i>
    </a>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <nav class="sidebar-nav" id="sidebarNav">
        <div class="sidebar-header">
            <div class="sidebar-title">Fortaleza de Seguridad</div>
            <div class="sidebar-subtitle">Fundamentos de Seguridad</div>
        </div>
        
        <div class="nav-sections">
            <div class="nav-section">
                <div class="nav-section-title">Navegaci√≥n</div>
                <a href="index.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    Men√∫ principal
                </a>
                <a href="6.1.html" class="nav-item">
                    <i class="fas fa-book-open"></i>
                    Volver al material
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Otras Actividades</div>
                <a href="actividad_6_2.html" class="nav-item">
                    <i class="fas fa-tasks"></i>
                    Actividad 6.2
                </a>
            </div>
        </div>
    </nav>

    <button class="scroll-to-top" id="scrollToTop">
        <i class="fas fa-chevron-up"></i>
    </button>

    <div class="container">
        <div class="header">
            <div class="breadcrumb">
                <a href="index.html"><i class="fas fa-home"></i> Inicio</a>
                <span>/</span>
                <a href="6.1.html">6.1 El Ambiente de Seguridad</a>
                <span>/</span>
                <span>Fortaleza de la Seguridad</span>
            </div>
            <h1>üõ°Ô∏è Fortaleza de la Seguridad</h1>
            <div class="subtitle">¬°Defiende el sistema del temible Virus Corruptor!</div>
        </div>

        <div class="instructions">
            <h3><i class="fas fa-gamepad"></i> Instrucciones de Batalla</h3>
            <ul>
                <li><strong>Misi√≥n:</strong> Derrota al Virus Corruptor respondiendo correctamente las preguntas sobre seguridad.</li>
                <li><strong>Mec√°nica:</strong> Cada respuesta correcta inflige 1 punto de da√±o al virus. Cada respuesta incorrecta cuenta como un error.</li>
                <li><strong>Victoria:</strong> Reduce la vida del virus a 0 HP respondiendo las 10 preguntas correctamente.</li>
                <li><strong>Derrota:</strong> Cometes m√°s de 3 errores antes de eliminar al virus.</li>
                <li><strong>Estrategia:</strong> ¬°Analiza cada vulnerabilidad y ataca con precisi√≥n!</li>
            </ul>
        </div>

        <div class="battle-arena">
            <div class="monster-section">
                <div class="monster-avatar" id="monsterAvatar">ü¶†</div>
                <div class="monster-name">Virus Corruptor</div>
                <div class="health-bar-container">
                    <div class="health-bar" id="healthBar" style="width: 100%;"></div>
                </div>
                <div class="health-text" id="healthText">10 / 10 HP</div>
            </div>

            <div class="player-stats">
                <div class="stat-card">
                    <div class="stat-value" id="timerValue">0s</div>
                    <div class="stat-label"><i class="fas fa-clock"></i> Tiempo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="attemptsValue">0</div>
                    <div class="stat-label"><i class="fas fa-firewall"></i> Contraataques</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="errorsValue">0 / 3</div>
                    <div class="stat-label"><i class="fas fa-bug"></i> Brechas</div>
                    <div class="error-indicators" id="errorIndicators">
                        <div class="error-dot"></div>
                        <div class="error-dot"></div>
                        <div class="error-dot"></div>
                    </div>
                </div>
            </div>

            <div class="questions-section">
                <h3><i class="fas fa-scroll"></i> Desaf√≠os de Seguridad</h3>
                <div id="questionsContainer"></div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="battle-controls">
                <button class="btn btn-attack" onclick="attack()" id="attackBtn">
                    <i class="fas fa-bolt"></i> ¬°ERRADICAR!
                </button>
                <button class="btn btn-secondary" onclick="resetBattle()">
                    <i class="fas fa-redo"></i> Nueva Simulaci√≥n
                </button>
                <button class="btn btn-secondary" onclick="toggleSolutions()" id="toggleSolutionsBtn">
                    <i class="fas fa-lightbulb"></i> Ver Firmas
                </button>
            </div>

            <div class="game-status" id="gameStatus"></div>
            
            <div class="solutions-section" id="solutionsSection">
                <h4><i class="fas fa-key"></i> Firmas de Virus Correctas</h4>
                <div id="solutionsList"></div>
            </div>

        </div>

        <div class="navigation">
            <a href="6.1.html" class="btn btn-success">
                <i class="fas fa-arrow-left"></i> Volver al Material
            </a>
            <div class="nav-center">
                <a href="index.html" class="btn btn-secondary">
                    <i class="fas fa-home"></i> Men√∫ Principal
                </a>
            </div>
            <a href="6.2.html" class="btn btn-success">
                Siguiente Tema <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>

    <script>
        let time = 0;
        let attempts = 0;
        let errors = 0;
        let monsterHP = 10;
        let maxHP = 10;
        let maxErrors = 3;
        let gameOver = false;
        let timerInterval;
        let sidebarOpen = false;
        let selectedAnswers = {};
        let completed = 0;
        let solutionsVisible = false;

        const questions = [
            { question: "¬øCu√°l es la principal diferencia entre seguridad y protecci√≥n en sistemas operativos?", options: ["Seguridad se refiere a hardware, protecci√≥n a software", "No hay diferencia, son sin√≥nimos", "Seguridad es para usuarios, protecci√≥n para administradores", "Seguridad incluye pol√≠ticas administrativas y legales, protecci√≥n son mecanismos espec√≠ficos del SO"], correct: 3 },
            { question: "En el modelo Bell-LaPadula, la propiedad *-estrella (star property) establece que:", options: ["Se puede leer informaci√≥n de niveles superiores", "Se puede escribir en cualquier nivel", "No se puede leer informaci√≥n de niveles inferiores", "No se puede escribir informaci√≥n en niveles inferiores"], correct: 3 },
            { question: "Las matrices de acceso se utilizan principalmente para:", options: ["Acelerar el procesamiento", "Gestionar la memoria virtual", "Controlar dispositivos de entrada/salida", "Prevenir interbloqueos y gestionar recursos"], correct: 3 },
            { question: "El modelo Biba se enfoca principalmente en:", options: ["Confidencialidad de datos", "Disponibilidad del sistema", "Autenticaci√≥n de usuarios", "Integridad de datos"], correct: 3 },
            { question: "Un caballo de Troya se caracteriza por:", options: ["Autorreplicarse sin programa anfitri√≥n", "Atacar servidores masivamente", "Adivinar contrase√±as de usuarios", "Hacer cosas no autorizadas cuando act√∫a en el entorno adecuado"], correct: 3 },
            { question: "¬øQu√© caracter√≠stica distingue principalmente a un gusano de un virus inform√°tico?", options: ["Solo afecta a sistemas UNIX.", "Siempre requiere la intervenci√≥n del usuario para activarse.", "Su √∫nico prop√≥sito es borrar archivos del disco duro.", "No necesita un programa anfitri√≥n para propagarse y puede autorreplicarse a trav√©s de la red."], correct: 3 },
            { question: "El control de acceso en un sistema operativo aborda principalmente dos problemas. ¬øCu√°les son?", options: ["La velocidad de la red y el espacio en disco.", "La compatibilidad del software y la gesti√≥n de energ√≠a.", "El cifrado de datos y la compresi√≥n de archivos.", "La autenticaci√≥n de usuarios y la protecci√≥n frente a accesos indebidos."], correct: 3 },
            { question: "En el modelo de seguridad Biba, ¬øqu√© establece la \"propiedad de integridad simple\"?", options: ["Un proceso puede leer datos de cualquier nivel de integridad.", "Un proceso no puede leer datos de un nivel inferior al suyo.", "Un proceso puede escribir datos en cualquier nivel de integridad.", "Un proceso no puede escribir datos en un nivel de integridad superior al suyo."], correct: 3 },
            { question: "¬øCu√°l es el objetivo de un ataque de \"bombardeo\" o denegaci√≥n de servicio (DoS)?", options: ["Robar las contrase√±as de los usuarios del servidor.", "Instalar un caballo de Troya en el sistema.", "Modificar los datos almacenados en el servidor.", "Provocar que el servidor deniegue sus servicios a clientes leg√≠timos y eventualmente se bloquee."], correct: 3 },
            { question: "¬øCu√°l es el principio fundamental del modelo de Control de Acceso Discrecional (DAC)?", options: ["El acceso es controlado por etiquetas de seguridad definidas por el sistema.", "Todos los usuarios tienen los mismos permisos por defecto.", "Solo el administrador del sistema puede asignar permisos.", "El propietario de un recurso es quien decide y gestiona los permisos de acceso sobre √©l."], correct: 3 }
        ];
        
        const menuToggle = document.getElementById('menuToggle');
        const sidebarNav = document.getElementById('sidebarNav');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        function toggleSidebar() {
            sidebarOpen = !sidebarOpen;
            sidebarNav.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
            menuToggle.classList.toggle('active');
            menuToggle.innerHTML = sidebarOpen ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
            document.body.style.overflow = sidebarOpen ? 'hidden' : 'auto';
            updateContainerSpacing();
        }

        menuToggle.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);

        function updateContainerSpacing() {
            const container = document.querySelector('.container');
            if (window.innerWidth <= 768) {
                container.style.marginLeft = '20px';
                container.style.marginRight = '20px';
                container.style.padding = '10px';
            } else if (sidebarOpen) {
                container.style.marginLeft = '370px';
                container.style.marginRight = '90px';
            } else {
                container.style.marginLeft = 'auto';
                container.style.marginRight = 'auto';
            }
        }

        function initGame() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = ''; // Limpiar preguntas anteriores
            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <div class="question-number">Desaf√≠o ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((option, optIndex) => `
                            <div class="option" onclick="selectOption(${index}, ${optIndex})" id="q${index}opt${optIndex}">
                                <div class="option-letter">${String.fromCharCode(97 + optIndex)})</div>
                                <div class="option-text">${option}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(questionDiv);
            });
            loadSolutions();
            startTimer();
        }
        
        function loadSolutions() {
            const solutionsList = document.getElementById('solutionsList');
            solutionsList.innerHTML = ''; // Limpiar
            const solutionsHTML = questions.map((q, i) => {
                const correctLetter = String.fromCharCode(97 + q.correct);
                return `<div class="solution-item"><strong>Desaf√≠o ${i + 1}:</strong> ${correctLetter}) ${q.options[q.correct]}</div>`;
            }).join('');
            solutionsList.innerHTML = solutionsHTML;
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                time++;
                document.getElementById('timerValue').textContent = `${time}s`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }
        
        function selectOption(questionIndex, optionIndex) {
            if (gameOver) return;
            for (let i = 0; i < questions[questionIndex].options.length; i++) {
                document.getElementById(`q${questionIndex}opt${i}`).classList.remove('selected');
            }
            document.getElementById(`q${questionIndex}opt${optionIndex}`).classList.add('selected');
            selectedAnswers[questionIndex] = optionIndex;
            updateProgress();
        }

        function updateProgress() {
            completed = Object.keys(selectedAnswers).length;
            const percentage = (completed / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${percentage}%`;
        }
        
        function updateUI() {
            const healthPercentage = (monsterHP / maxHP) * 100;
            document.getElementById('healthBar').style.width = `${healthPercentage}%`;
            document.getElementById('healthText').textContent = `${monsterHP} / ${maxHP} HP`;
            
            const errorDots = document.querySelectorAll('.error-dot');
            errorDots.forEach((dot, index) => {
                dot.classList.toggle('filled', index < errors);
            });
            
            document.getElementById('attemptsValue').textContent = attempts;
            document.getElementById('errorsValue').textContent = `${errors} / ${maxErrors}`;
            updateMonsterAvatar();
        }
        
        function updateMonsterAvatar() {
            const avatar = document.getElementById('monsterAvatar');
            const healthPercentage = (monsterHP / maxHP) * 100;
            if (healthPercentage > 70) avatar.textContent = 'ü¶†';
            else if (healthPercentage > 40) avatar.textContent = 'üß¨';
            else if (healthPercentage > 0) avatar.textContent = 'üëæ';
            else avatar.textContent = 'üí•';
        }

        function attack() {
            if (gameOver) return;
            if (completed < questions.length) {
                showGameStatus("‚ö†Ô∏è ¬°Responde todas las preguntas antes de erradicar al virus!", "continue");
                return;
            }

            attempts++;
            let correctCount = 0;
            questions.forEach((q, qIndex) => {
                const userAnswerIndex = selectedAnswers[qIndex];
                const isCorrect = userAnswerIndex === q.correct;
                if (isCorrect) {
                    correctCount++;
                }
                document.getElementById(`q${qIndex}opt${userAnswerIndex}`).classList.add(isCorrect ? 'correct' : 'incorrect');
                if (!isCorrect) {
                    document.getElementById(`q${qIndex}opt${q.correct}`).classList.add('correct');
                }
            });
            
            const damage = correctCount;
            const currentErrorsInAttack = questions.length - correctCount; 
            monsterHP = Math.max(0, monsterHP - damage);
            errors = Math.min(maxErrors, currentErrorsInAttack);
            updateUI();
            checkGameEnd();
        }

        function checkGameEnd() {
            const attackBtn = document.getElementById('attackBtn');
            if (monsterHP <= 0) {
                stopTimer();
                gameOver = true;
                showGameStatus(`<i class="fas fa-shield-alt"></i> ¬°VICTORIA! Has erradicado al Virus.<br><small>Tiempo: ${time}s | Ataques: ${attempts} | Brechas: ${errors}/${maxErrors}</small>`, 'victory');
                attackBtn.disabled = true;
                document.body.style.animation = 'victoryGlow 2s ease-in-out infinite';
            } else if (errors >= maxErrors) {
                stopTimer();
                gameOver = true;
                showGameStatus(`<i class="fas fa-skull-crossbones"></i> ¬°SISTEMA COMPROMETIDO!<br><small>Demasiadas brechas de seguridad.</small>`, 'defeat');
                attackBtn.disabled = true;
                document.body.style.animation = 'defeatPulse 1s ease-in-out infinite';
            }
        }

        function showGameStatus(message, type) {
            const statusDiv = document.getElementById('gameStatus');
            statusDiv.innerHTML = message;
            statusDiv.className = `game-status ${type}`;
            statusDiv.style.display = 'block';
            if (type === 'continue') {
                setTimeout(() => { statusDiv.style.display = 'none'; }, 4000);
            }
        }
        
        function toggleSolutions() {
            const solutionsSection = document.getElementById('solutionsSection');
            const toggleBtn = document.getElementById('toggleSolutionsBtn');
            solutionsVisible = !solutionsVisible;

            if (solutionsVisible) {
                solutionsSection.style.display = 'block';
                toggleBtn.innerHTML = '<i class="fas fa-eye-slash"></i> Ocultar Firmas';
                solutionsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            } else {
                solutionsSection.style.display = 'none';
                toggleBtn.innerHTML = '<i class="fas fa-lightbulb"></i> Ver Firmas';
            }
        }

        function resetBattle() {
            time = 0;
            attempts = 0;
            errors = 0;
            monsterHP = maxHP;
            gameOver = false;
            selectedAnswers = {};
            completed = 0;
            
            document.getElementById('timerValue').textContent = '0s';
            document.getElementById('gameStatus').style.display = 'none';
            document.getElementById('attackBtn').disabled = false;
            document.getElementById('progressFill').style.width = '0%';
            document.body.style.animation = 'none';
            
            // Ocultar secci√≥n de soluciones y resetear bot√≥n
            solutionsVisible = false;
            document.getElementById('solutionsSection').style.display = 'none';
            document.getElementById('toggleSolutionsBtn').innerHTML = '<i class="fas fa-lightbulb"></i> Ver Firmas';

            // Limpiar estilos de las opciones
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
            
            updateUI();
            stopTimer();
            startTimer();
        }

        const scrollToTopBtn = document.getElementById('scrollToTop');
        function toggleFloatingButtons() {
            const scrollPosition = window.pageYOffset;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            
            scrollToTopBtn.classList.toggle('visible', scrollPosition > 300);
            document.querySelector('.floating-home-btn').classList.toggle('hidden', scrollPosition + windowHeight >= documentHeight - 100);
        }

        scrollToTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        window.addEventListener('scroll', () => {
            updateReadingProgress();
            toggleFloatingButtons();
        });
        window.addEventListener('resize', updateContainerSpacing);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && sidebarOpen) toggleSidebar();
            if ((e.key === 'm' || e.key === 'M') && !e.ctrlKey && !e.altKey) toggleSidebar();
            if (e.key === 'Enter' && !gameOver) attack();
        });
        document.addEventListener('DOMContentLoaded', () => {
            initGame();
            updateContainerSpacing();
        });
    </script>
</body>
</html>